\documentclass[a4paper]{article}
\usepackage[french]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{booktabs}   % For better-looking horizontal lines
\usepackage{array}      % For adjusting row spacing
\usepackage{csquotes}   % pour éviter un warning
\usepackage{graphicx}   % pour les images
\usepackage{hyperref}   % pour les références
\usepackage{float}      % pour les figures
\usepackage{amsmath}    % pour les formules mathématiques
% \usepackage{multicol}   % pour les 2 colonnes
\usepackage{subcaption} % pour les sous-figures
% \usepackage{caption}    % pour les légendes
% \usepackage{fullpage}   % mets les marges en petits 
% \usepackage{placeins}   % For     \FloatBarrier command
\usepackage{appendix}  % For appendices

\usepackage[style=ieee,backend=biber]{biblatex}
\addbibresource{ref.bib}

\hypersetup{
    colorlinks=true,
    linkcolor=blue,   % Couleur des liens internes (table des matières, références)
    citecolor=green,  % Couleur des liens vers les références bibliographiques
    filecolor=magenta,% Couleur des liens vers les fichiers
    urlcolor=blue     % Couleur des liens vers les URL
}

\title{Rapport Projet 3A \\ Analyse de traces de sang}
% \subtitle{Analyse de trace de sang}
\author{Cléa Han, Yanis Labeyrie et Adrien Zabban}
% \institute{Ecole Centrale Méditerranée, 13013 Marseille, France}
\date{Mars 2024}

\begin{document}

\maketitle
% \bigskip
% \tableofcontents
% \newpage

\section{Introduction}

Notre projet 3A s'intéresse à l'analyse de traces de sang dans le cadre du travail de l'expert criminalistique Philippe Esperança. En effet, l'objectif est de réaliser une intelligence artificielle pour assister et faciliter le travail d'analyse de scènes de crimes présentant du sang. 

Les travaux de Philippe Esperança sur l'analyse  des traces de sangs~\cite{PhilippeEsperança}, a abouti à la classification de ces traces en 19 classes distinctes qui sont listées dans la Table~\ref{tab:classes}. Notre but est alors de faire un modèle de machine learning capable de prédire la classe pour une image de trace de sang.

\begin{table}[ht]
    \centering
    \begin{tabular}{|ll|}
        \hline
        \textbf{Classe des types de trace de sang} &  \\
        \hline
        1- Modèles Traces passives & 2- Modèles Goutte à Goutte \\
        3- Modèle Transfert par contact & 4- Modèle Transfert glissé \\
        5- Modèle Altération par contact & 6- Modèle Altération glissée \\
        7- Modèle d'Accumulation & 8- Modèle Coulée \\
        9- Modèle Chute de volume & 10- Modèle sang Propulsé \\
        11- Modèle d'éjection & 12- Modèle Volume Impacté \\
        13- Modèle Imprégnation & 14- Modèle Zone d'interruption \\
        15- Modèle d'impact & 16- Modèle Foyer de modèle d'impact \\
        17- Modèle Trace gravitationnelle & 18- Modèle Sang expiré \\
        19- Modèle Trace d'insecte & \\
        \hline
    \end{tabular}
    \caption{Liste des 19 modèles de trace de sang}
    \label{tab:classes}
\end{table}

\section{Données}
\input{section/data}

\section{Modèles}
\input{section/models}

\section{Métriques}
Pour comparer les performances de nos modèles, nous avons utilisé les métriques suivantes : l'accuracy micro (indique le pourcentage de réussite d'un modèle), l'accuracy macro (indique la moyenne du pourcentage de réussite de chacune des classes), la précision, le rappel, le f1-score, le top~3 (indique le pourcentage de trouver la réponse parmi les 3 classes les plus prédites par le modèle). Toutes ces métriques sont des valeurs qui vont de 0 à 100, où 100 est le meilleur score. 
Les procédures de calcul de ces métriques sont explicitées en détail dans l'annexe~\ref{sec: metrics}.

\section{Apprentissage des modèles}
\input{section/learning}

% \section{Interprétabilité avec les cartes de saillance}
% \input{section/grad_cam_explanation}

\section{Résultats}
\input{section/test_results}

\section{Interprétabilité avec les cartes de saillance}
\input{section/grad_cam_explanation}

\section{Conclusion}

Le modèle sur lequel nous avons abouti représente un potentiel. Il présente de bonnes performances sur les données de laboratoires, 97\% d'accuracy (micro) contre 41\% avec les données réelles, sachant qu'il y a 10 000 images de laboratoire contre environ 300 images réelles.
D'autres pistes d'améliorations possibles concernent le modèle Resnet utilisé. Celui qui a été manipulé est le Resnet50, qui est relativement petit par rapport à d'autres Resnet plus grands existants, comme ResNet50x4, ResNet50x16. Il y a également peu de résultats concluants et significatifs à travers les cartes de saillance avec le Grad cam utilisé. Il serait éventuellement plus judicieux d'utiliser des méthodes plus sophistiqué comme Grad cam ++ ou Score cam. Une autre approche qu'on pourrait envisager est d'utiliser de l'apprentissage auto-supervisé pour exploiter l'ensemble des images non classées que possède l'expert criminalistique. En effet, depuis 10 ans, il accumule une très grande quantité d'images de scènes de crime, qui n'a pas le temps de classer, qui pourraient être utilisées pour entraîner un modèle de deep learning.

Nous avons eu l'occasion de tester d'autres approches qui sont décrites plus en détail dans la section~\ref{sec: pistes infructruces}. Parmi celles-ci, figurait l'utilisation de la clé de détermination élaborée par Philippe Esperança. Cette méthode consiste à analyser différentes caractéristiques observées sur l'image de la trace de sang, telles que la présence ou non d'une forme ovale, afin de classifier les traces de sang en différentes catégories selon les indications de la clé de détermination. Toutefois, les méthodes examinées n'ont pas donné de résultats concluants.

Notre encadrant a pu recevoir notre projet sous la forme d'une interface qui fonctionne localement sur son appareil de travail. Ce modèle d'analyse de traces de sang ne doit pas avoir accès à internet afin d'éviter tout risque d'attaque ou de fuite de données. Pouvoir faire tourner le projet en local pour l'expert criminalistique lui permet de nous faire confiance vis-à-vis de l'outil implémenté. Malgré des prédictions et des interprétations instables dans le contexte de notre projet, il a pu néanmoins apprécier et être satisfait de notre rendu dans son ensemble pour les objectifs qu'il remplit.

Notre projet va faire l'objet d'une reprise dans le cadre d'un sujet de stage au laboratoire LIS. Ainsi, notre projet possède un GitHub public ainsi qu'une documentation détaillée afin que les prochaines personnes en charge puissent reprendre aisément notre travail.

\newpage
\printbibliography

% \newpage
\begin{appendices}

\section{Images de laboratoire}
\label{sec: annexe}
\input{section/images_labo}

\section{Calcul des métriques}
\input{section/metrics}

\section{Pistes infructueuses}
\label{sec: pistes infructruces}
\input{section/pistes_infructueuses}


\end{appendices}

\end{document}